<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Citas Médicas - Consultorio de Barrio</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

  <!-- Tus estilos personalizados -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <!-- Loading Screen -->
    <div id="loading-screen" class="d-flex justify-content-center align-items-center vh-100 bg-light">
      <div class="text-center">
        <i class="fas fa-stethoscope fa-3x text-primary mb-3"></i>
        <p>Cargando...</p>
      </div>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="container py-5">
      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="text-center mb-4">
            <i class="fas fa-stethoscope fa-3x text-primary mb-2"></i>
            <h1>Sistema de Citas Médicas</h1>
            <p class="text-muted">Consultorio de Barrio</p>
          </div>

          <div class="card shadow-sm mb-3">
            <div class="card-header text-center">
              <h2>Iniciar Sesión</h2>
            </div>
            <div class="card-body">
              <form id="login-form">
                <div class="mb-3">
                  <label for="login-rut" class="form-label">RUT</label>
                  <input type="text" id="login-rut" class="form-control" placeholder="12.345.678-9" maxlength="12">
                  <div id="login-rut-error" class="text-danger small"></div>
                </div>

                <div class="mb-3">
                  <label for="login-password" class="form-label">Contraseña</label>
                  <div class="input-group">
                    <input type="password" id="login-password" class="form-control" placeholder="Ingresa tu contraseña">
                    <button type="button" id="toggle-login-password" class="btn btn-outline-secondary">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                  <div id="login-password-error" class="text-danger small"></div>
                </div>

                <div id="login-error" class="alert alert-danger d-none"></div>

                <button type="submit" class="btn btn-primary w-100">Iniciar Sesión</button>
              </form>

              <div class="text-center mt-3">
                <button id="go-to-register" class="btn btn-link">¿No tienes cuenta? Crear cuenta</button>
              </div>
            </div>
          </div>

          <!-- Credenciales de prueba -->
          <div class="card shadow-sm">
            <div class="card-header text-center">
              <h2>Credenciales de Prueba</h2>
            </div>
            <div class="card-body">
              <div class="mb-3">
                <p class="fw-bold text-success">Paciente</p>
                <p>RUT: 11.111.111-1</p>
                <p>Contraseña: paciente123</p>
              </div>
              <div>
                <p class="fw-bold text-primary">Administrador</p>
                <p>RUT: 22.222.222-2</p>
                <p>Contraseña: admin123</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Register Screen -->
    <div id="register-screen" class="container py-5 d-none">
      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="text-center mb-4">
            <button id="back-to-login" class="btn btn-outline-secondary mb-3">
              <i class="fas fa-arrow-left"></i>
            </button>
            <h1>Crear Cuenta</h1>
            <p class="text-muted">Registro de nuevo paciente</p>
          </div>
          <div class="card shadow-sm">
            <div class="card-body">
              <form id="register-form">
                <div class="mb-3">
                  <label class="form-label">Nombre completo</label>
                  <input type="text" id="register-name" class="form-control" placeholder="Ingresa tu nombre completo">
                  <div id="register-name-error" class="text-danger small"></div>
                </div>
                <div class="mb-3">
                  <label class="form-label">RUT</label>
                  <input type="text" id="register-rut" class="form-control" placeholder="12.345.678-9" maxlength="12">
                  <div id="register-rut-error" class="text-danger small"></div>
                </div>
                <div class="mb-3">
                  <label class="form-label">Email</label>
                  <input type="email" id="register-email" class="form-control" placeholder="tu@email.com">
                  <div id="register-email-error" class="text-danger small"></div>
                </div>
                <div class="mb-3">
                  <label class="form-label">Contraseña</label>
                  <div class="input-group">
                    <input type="password" id="register-password" class="form-control" placeholder="Crea una contraseña">
                    <button type="button" id="toggle-register-password" class="btn btn-outline-secondary">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                  <div id="register-password-error" class="text-danger small"></div>
                </div>
                <div class="mb-3">
                  <label class="form-label">Confirmar contraseña</label>
                  <div class="input-group">
                    <input type="password" id="register-confirm-password" class="form-control" placeholder="Confirma tu contraseña">
                    <button type="button" id="toggle-confirm-password" class="btn btn-outline-secondary">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                  <div id="register-confirm-password-error" class="text-danger small"></div>
                </div>
                <button type="submit" class="btn btn-primary w-100">Crear Cuenta</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Account Created Screen -->
    <div id="account-created-screen" class="container py-5 d-none">
      <div class="row justify-content-center">
        <div class="col-md-6 text-center">
          <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
          <h1>¡Cuenta creada exitosamente!</h1>
          <p class="text-muted">Ahora puedes iniciar sesión con tus credenciales.</p>
          <button id="go-to-login-from-created" class="btn btn-primary">Iniciar Sesión</button>
        </div>
      </div>
    </div>

    <!-- Appointments Screen -->
    <div id="appointments-screen" class="container-fluid py-3 d-none">
      <header class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">
        <div>
          <i class="fas fa-stethoscope text-primary me-2"></i>
          <span class="fw-bold">Citas Médicas</span>
        </div>
        <div>
          <span id="user-name" class="me-2 fw-bold"></span>
          <span id="user-role" class="badge bg-primary"></span>
          <button id="logout-btn" class="btn btn-outline-danger btn-sm ms-2">
            <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
          </button>
        </div>
      </header>

      <main>
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h2>Gestión de Citas</h2>
          <button id="new-appointment-btn" class="btn btn-primary">
            <i class="fas fa-plus"></i> Nueva Cita
          </button>
        </div>

        <!-- Filtros -->
        <div class="card shadow-sm mb-3">
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-2">
                <label class="form-label">Especialidad</label>
                <select id="filter-specialty" class="form-select">
                  <option value="">Todas</option>
                  <option>Medicina General</option>
                  <option>Pediatría</option>
                  <option>Dermatología</option>
                  <option>Odontología</option>
                </select>
              </div>
              <div class="col-md-2">
                <label class="form-label">Médico</label>
                <select id="filter-doctor" class="form-select">
                  <option value="">Todos</option>
                  <option>Dra. López</option>
                  <option>Dr. Soto</option>
                  <option>Dra. Vargas</option>
                  <option>Dr. Rivas</option>
                </select>
              </div>
              <div class="col-md-2">
                <label class="form-label">Estado</label>
                <select id="filter-status" class="form-select">
                  <option value="">Todos</option>
                  <option value="confirmed">Confirmada</option>
                  <option value="cancelled">Cancelada</option>
                </select>
              </div>
              <div class="col-md-2">
                <label class="form-label">Fecha</label>
                <input type="date" id="filter-date" class="form-control">
              </div>
              <div class="col-md-2">
                <label class="form-label">Orden</label>
                <select id="sort-order" class="form-select">
                  <option value="">Sin orden</option>
                  <option value="time-asc">Hora ↑</option>
                  <option value="time-desc">Hora ↓</option>
                </select>
              </div>
              <div class="col-md-2 d-flex align-items-end">
                <button id="clear-filters" class="btn btn-outline-secondary w-100">Limpiar</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Lista de citas -->
        <div id="appointments-container" class="row gy-3"></div>
        <div id="no-appointments" class="text-center text-muted d-none">
          <i class="fas fa-calendar-times fa-3x mb-2"></i>
          <h4>No hay citas para mostrar</h4>
        </div>
      </main>
    </div>

    <!-- Modal de Confirmación -->
    <div id="confirmation-modal" class="modal fade" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 id="modal-title" class="modal-title">Confirmar Acción</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <p id="modal-message">¿Estás seguro de que deseas realizar esta acción?</p>
          </div>
          <div class="modal-footer">
            <button id="modal-cancel" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button id="modal-confirm" class="btn btn-danger">Confirmar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toasts -->
    <div id="toast-container" class="toast-container position-fixed top-0 end-0 p-3"></div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Lógica de la app -->
  <script src="script.js"></script>
</body>
</html>
